---
title: "ATP Plugin"
description: "Plugin for interacting with IQ ATP (Agent Tokenization Platform) for managing AI agent tokens"
---

import { Steps, Tabs, TabItem, Aside } from '@astrojs/starlight/components';

## ğŸ“Œ Overview

The **ATP Plugin** enables your agent to interact with **IQ's Agent Tokenization Platform**. It provides functionality for:

âœ… **Buying, selling, and managing AI agent tokens** using IQ as the base currency ğŸ”„
âœ… **Viewing agent performance metrics and token statistics** ğŸ“Š
âœ… **Managing token holdings and checking position values** ğŸ’°

---

## ğŸ›  Installation

<Steps>
1. Install the required packages:

   ```bash
   pnpm add @iqai/agent @iqai/plugin-atp @elizaos/core
   ```

2. Create a **.env** file with the required configuration:

   ```bash
   WALLET_PRIVATE_KEY=your-wallet-private-key
   ```
</Steps>

---

## âš™ Basic Setup

Here's a complete example of setting up an agent with the ATP plugin:

```typescript
import { Agent } from "@iqai/agent";
import { createATPPlugin } from "@iqai/plugin-atp";
import { ModelProviderName } from "@elizaos/core";

async function main() {
  // Initialize ATP plugin
  const atpPlugin = await createATPPlugin({
    walletPrivateKey: process.env.WALLET_PRIVATE_KEY,
  });

  // Create agent with plugin
  const agent = new Agent({
    modelProvider: ModelProviderName.OPENAI,
    modelKey: process.env.OPENAI_API_KEY,
    plugins: [atpPlugin],
  });

  await agent.start();
}

main().catch(console.error);
```

---

## ğŸ¯ Available Operations

### ğŸ“Š Agent Statistics
âœ… View **agent performance metrics**
âœ… Check **token statistics**

### ğŸ“ˆ Portfolio Management
âœ… View **current token holdings**
âœ… Check **position values**

### ğŸ›’ Trading Operations
âœ… Buy **agent tokens using IQ**
âœ… Sell **agent tokens back to protocol**

---

## ğŸ“ Usage Examples

### ğŸ“Š Checking Agent Statistics
**Query:**
```plaintext
Show me stats for agent 0x1234...5678
```

### ğŸ“ˆ Viewing Portfolio
**Query:**
```plaintext
Show my ATP holdings
```

### ğŸ›’ Buying Tokens
**Query:**
```plaintext
Buy 1000 IQ worth of agent 0x1234...5678
```

### ğŸ’° Selling Tokens
**Query:**
```plaintext
Sell 50 tokens of agent 0x1234...5678
```

---

## âš™ Configuration Options

The ATP plugin accepts the following configuration parameters:

```typescript
interface ATPPluginConfig {
  walletPrivateKey: string;  // Private key for transactions
}
```

---

## âŒ Error Handling

Always implement proper error handling when using the plugin:

```typescript
try {
  const atpPlugin = await createATPPlugin({
    walletPrivateKey: process.env.WALLET_PRIVATE_KEY,
  });
} catch (error) {
  console.error('Failed to initialize ATP plugin:', error);
}
```

---

## ğŸ” Best Practices

âœ” **Token Validation**: Verify agent addresses before transactions
âœ” **Amount Verification**: Double-check token amounts and IQ values
âœ” **Transaction Monitoring**: Track transaction status and confirmations
âœ” **Balance Management**: Ensure sufficient IQ balance for purchases

---

## ğŸ›  Common Issues and Troubleshooting

ğŸš¨ **Invalid Agent Address**: Ensure you're using the correct agent token contract address
ğŸ’¸ **Insufficient IQ Balance**: Verify you have enough IQ tokens for purchases
ğŸ”„ **Transaction Failures**: Check transaction parameters and network status
ğŸ”‘ **Token Approval**: Ensure proper token approvals before selling
